<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>üé® Mezclador Interactivo ‚Äì Colores Base</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      text-align: center;
    }
    h2 {
      margin-top: 40px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }
    .color-sample-btn {
      width: 60px;
      height: 60px;
      display: block;
      border-radius: 8px;
      border: 3px solid transparent;
      cursor: pointer;
      transition: border 0.2s;
      margin: auto;
    }
    .color-sample-btn.selected {
      border: 3px solid #333;
    }

    thead {
      background-color: #f5f5f5;
    }

    tbody tr:nth-child(even) {
      background-color: #fafafa;
    }

    /* Estilos mezclador */
    .color-list {
      margin: 20px 0;
    }
    .color-label {
      font-size: 14px;
      margin-right: 10px;
    }
    .percent-display {
      display: inline-block;
      width: 40px;
      text-align: right;
      font-family: monospace;
      font-weight: bold;
    }
    .mix-controls {
      margin-top: 20px;
    }
    .slider-container {
      margin: 10px 0;
    }
    input[type=range] {
      width: 70%;
    }
    #mix-box {
      width: 150px;
      height: 150px;
      margin: 20px auto;
      border: 2px solid #ccc;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<!-- T√çTULO -->
<h2>üé® Mezclador Interactivo de Colores</h2>

<!-- TABLA INTERACTIVA DE COLORES BASE -->
<h3>üìå Elige colores haciendo clic en los cuadrados</h3>

<table>
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Color</th>
      <th>C√≥digo HEX</th>
      <th>Composici√≥n RYB</th>
      <th>Nombre coloquial</th>
    </tr>
  </thead>
  <tbody>
    <!-- PRIMARIOS -->
    <tr>
      <td>Rojo</td>
      <td><div class="color-sample-btn" style="background-color:#FF0000" title="Rojo puro" onclick="agregarColor('#FF0000', 'Rojo', this)"></div></td>
      <td>#FF0000</td>
      <td>Rojo (100%)</td>
      <td>Rojo puro</td>
    </tr>
    <tr>
      <td>Amarillo</td>
      <td><div class="color-sample-btn" style="background-color:#FFFF00" title="Amarillo puro" onclick="agregarColor('#FFFF00', 'Amarillo', this)"></div></td>
      <td>#FFFF00</td>
      <td>Amarillo (100%)</td>
      <td>Amarillo puro</td>
    </tr>
    <tr>
      <td>Azul</td>
      <td><div class="color-sample-btn" style="background-color:#0000FF" title="Azul profundo" onclick="agregarColor('#0000FF', 'Azul', this)"></div></td>
      <td>#0000FF</td>
      <td>Azul (100%)</td>
      <td>Azul cobalto</td>
    </tr>

    <!-- SECUNDARIOS -->
    <tr>
      <td>Naranja</td>
      <td><div class="color-sample-btn" style="background-color:#FFA500" title="Naranja cl√°sico" onclick="agregarColor('#FFA500', 'Naranja', this)"></div></td>
      <td>#FFA500</td>
      <td>Rojo (50%), Amarillo (50%)</td>
      <td>Naranja cl√°sico</td>
    </tr>
    <tr>
      <td>Verde</td>
      <td><div class="color-sample-btn" style="background-color:#008000" title="Verde oscuro" onclick="agregarColor('#008000', 'Verde', this)"></div></td>
      <td>#008000</td>
      <td>Amarillo (50%), Azul (50%)</td>
      <td>Verde oscuro</td>
    </tr>
    <tr>
      <td>Morado</td>
      <td><div class="color-sample-btn" style="background-color:#800080" title="Violeta fuerte" onclick="agregarColor('#800080', 'Morado', this)"></div></td>
      <td>#800080</td>
      <td>Rojo (50%), Azul (50%)</td>
      <td>Violeta fuerte</td>
    </tr>

    <!-- TERCIARIOS -->
    <tr>
      <td>Rojo-Naranja</td>
      <td><div class="color-sample-btn" style="background-color:#FF4500" title="Carne / Naranja c√°lido" onclick="agregarColor('#FF4500', 'Rojo-Naranja', this)"></div></td>
      <td>#FF4500</td>
      <td>Rojo (75%), Amarillo (25%)</td>
      <td>Carne</td>
    </tr>
    <tr>
      <td>Amarillo-Naranja</td>
      <td><div class="color-sample-btn" style="background-color:#F9A825" title="√Åmbar / Oro viejo" onclick="agregarColor('#F9A825', 'Amarillo-Naranja', this)"></div></td>
      <td>#F9A825</td>
      <td>Amarillo (75%), Rojo (25%)</td>
      <td>√Åmbar / Oro viejo</td>
    </tr>
    <tr>
      <td>Amarillo-Verde</td>
      <td><div class="color-sample-btn" style="background-color:#7FFF00" title="Verde lima" onclick="agregarColor('#7FFF00', 'Amarillo-Verde', this)"></div></td>
      <td>#7FFF00</td>
      <td>Amarillo (75%), Azul (25%)</td>
      <td>Verde lima</td>
    </tr>
    <tr>
      <td>Azul-Verde</td>
      <td><div class="color-sample-btn" style="background-color:#008B8B" title="Verde azulado" onclick="agregarColor('#008B8B', 'Azul-Verde', this)"></div></td>
      <td>#008B8B</td>
      <td>Azul (75%), Amarillo (25%)</td>
      <td>Verde azulado</td>
    </tr>
    <tr>
      <td>Azul-Morado</td>
      <td><div class="color-sample-btn" style="background-color:#4B0082" title="√çndigo" onclick="agregarColor('#4B0082', 'Azul-Morado', this)"></div></td>
      <td>#4B0082</td>
      <td>Azul (75%), Rojo (25%)</td>
      <td>√çndigo</td>
    </tr>
    <tr>
      <td>Rojo-Morado</td>
      <td><div class="color-sample-btn" style="background-color:#9370DB" title="Lavanda" onclick="agregarColor('#9370DB', 'Rojo-Morado', this)"></div></td>
      <td>#9370DB</td>
      <td>Rojo (75%), Azul (25%)</td>
      <td>Lavanda</td>
    </tr>

    <!-- TERCIARIOS CLAROS -->
    <tr>
      <td>Rojo-Morado Claro</td>
      <td><div class="color-sample-btn" style="background-color:#C76FD6" title="Rosa suave" onclick="agregarColor('#C76FD6', 'Rosa Suave', this)"></div></td>
      <td>#C76FD6</td>
      <td>Rojo (60%), Azul (20%), Blanco (20%)</td>
      <td>Rosa suave</td>
    </tr>
    <tr>
      <td>Azul-Morado Claro</td>
      <td><div class="color-sample-btn" style="background-color:#A17EBD" title="Lavanda clara" onclick="agregarColor('#A17EBD', 'Lavanda Clara', this)"></div></td>
      <td>#A17EBD</td>
      <td>Azul (60%), Rojo (20%), Blanco (20%)</td>
      <td>Lavanda Clara</td>
    </tr>
    <tr>
      <td>Amarillo-Naranja Claro</td>
      <td><div class="color-sample-btn" style="background-color:#FACB61" title="Oro pastel" onclick="agregarColor('#FACB61', 'Oro Pastel', this)"></div></td>
      <td>#FACB61</td>
      <td>Amarillo (60%), Rojo (20%), Blanco (20%)</td>
      <td>Oro Pastel</td>
    </tr>
    <tr>
      <td>Azul-Verde Claro</td>
      <td><div class="color-sample-btn" style="background-color:#7CC0B5" title="Verde agua" onclick="agregarColor('#7CC0B5', 'Verde Agua', this)"></div></td>
      <td>#7CC0B5</td>
      <td>Azul (60%), Amarillo (20%), Blanco (20%)</td>
      <td>Verde Agua</td>
    </tr>
  </tbody>
</table>

<!-- Zona de mezcla -->
<div class="color-list" id="lista-colores-seleccionados"></div>

<div class="mix-controls">
  <div class="slider-container">
    <label>Blanco: <span id="blanco-val">0%</span></label><br>
    <input type="range" id="blanco" min="0" max="100" value="0" oninput="ajustarMezcla()">
  </div>
  <div class="slider-container">
    <label>Negro: <span id="negro-val">0%</span></label><br>
    <input type="range" id="negro" min="0" max="100" value="0" oninput="ajustarMezcla()">
  </div>
</div>

<div id="mix-box"></div>
<p id="color-hex">Color: #FFFFFF</p>
<button onclick="descargarColor()">Descargar Color</button>

<script>
  const MAX_COLORES = 6;
  let coloresSeleccionados = [];

  function hexToRgb(hex) {
    const bigint = parseInt(hex.slice(1), 16);
    return {
      r: (bigint >> 16) & 255,
      g: (bigint >> 8) & 255,
      b: bigint & 255
    };
  }

  function rgbToHex(r, g, b) {
    return "#" + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();
  }

  function agregarColor(hex, nombre, elemento) {
    const index = coloresSeleccionados.findIndex(c => c.hex === hex);
    if (index !== -1) {
      coloresSeleccionados.splice(index, 1);
      elemento.classList.remove("selected");
    } else {
      if (coloresSeleccionados.length >= MAX_COLORES) {
        alert(`Solo puedes seleccionar hasta ${MAX_COLORES} colores.`);
        return;
      }
      coloresSeleccionados.push({ hex, nombre });
      elemento.classList.add("selected");
    }
    actualizarLista();
    ajustarMezcla();
  }

  function actualizarLista() {
    const contenedor = document.getElementById("lista-colores-seleccionados");
    contenedor.innerHTML = "";

    if (coloresSeleccionados.length === 0) {
      contenedor.innerHTML = "<small>Selecciona hasta 6 colores.</small>";
      return;
    }

    coloresSeleccionados.forEach((color, index) => {
      const div = document.createElement("div");
      div.style.display = "flex";
      div.style.justifyContent = "space-between";
      div.style.alignItems = "center";
      div.style.marginBottom = "8px";

      const label = document.createElement("label");
      label.textContent = `${color.nombre}:`;
      label.className = "color-label";
      label.style.width = "130px";
      label.style.textAlign = "left";

      const percentDisplay = document.createElement("span");
      percentDisplay.className = "percent-display";
      percentDisplay.id = `percent-${index}`;
      percentDisplay.textContent = "25%";

      const input = document.createElement("input");
      input.type = "range";
      input.min = "0";
      input.max = "100";
      input.value = "25";
      input.style.flex = "1";
      input.oninput = () => {
        percentDisplay.textContent = `${input.value}%`;
        ajustarMezcla();
      };

      div.appendChild(label);
      div.appendChild(input);
      div.appendChild(percentDisplay);

      contenedor.appendChild(div);
    });
  }

  function ajustarMezcla() {
    if (coloresSeleccionados.length === 0) {
      document.getElementById("mix-box").style.backgroundColor = "#FFFFFF";
      document.getElementById("color-hex").textContent = "Color: #FFFFFF";
      return;
    }

    const sliders = document.querySelectorAll(".color-list input[type='range']");
    const pesos = Array.from(sliders).map(i => parseInt(i.value) / 100);
    const total = pesos.reduce((sum, p) => sum + p, 0) || 1;
    const pesosNorm = pesos.map(p => p / total);

    let rTotal = 0, gTotal = 0, bTotal = 0;

    coloresSeleccionados.forEach((color, i) => {
      const { r, g, b } = hexToRgb(color.hex);
      rTotal += r * pesosNorm[i];
      gTotal += g * pesosNorm[i];
      bTotal += b * pesosNorm[i];
    });

    let r = Math.round(rTotal);
    let g = Math.round(gTotal);
    let b = Math.round(bTotal);

    const w = parseInt(document.getElementById('blanco').value) / 100;
    const n = parseInt(document.getElementById('negro').value) / 100;

    if (w > 0) {
      r = Math.round(r * (1 - w) + 255 * w);
      g = Math.round(g * (1 - w) + 255 * w);
      b = Math.round(b * (1 - w) + 255 * w);
    }

    if (n > 0) {
      r = Math.round(r * (1 - n));
      g = Math.round(g * (1 - n));
      b = Math.round(b * (1 - n));
    }

    r = Math.min(255, Math.max(0, r));
    g = Math.min(255, Math.max(0, g));
    b = Math.min(255, Math.max(0, b));

    const hex = rgbToHex(r, g, b);
    document.getElementById("mix-box").style.backgroundColor = `rgb(${r},${g},${b})`;
    document.getElementById("color-hex").textContent = `Color: ${hex.toUpperCase()}`;
    document.getElementById("blanco-val").textContent = `${document.getElementById("blanco").value}%`;
    document.getElementById("negro-val").textContent = `${document.getElementById("negro").value}%`;
  }

  function descargarColor() {
    const canvas = document.createElement('canvas');
    canvas.width = 200;
    canvas.height = 200;
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = document.getElementById('mix-box').style.backgroundColor;
    ctx.fillRect(0, 0, 200, 200);
    const link = document.createElement('a');
    link.download = 'color-mezclado.png';
    link.href = canvas.toDataURL();
    link.click();
  }

  // Inicializar
  ajustarMezcla();
</script>

</body>
</html>